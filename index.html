<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>Three.js 가구 뷰어 (아이콘 로드 + 드래그 이동 + 선택 리스트)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html, body { margin:0; height:100%; background:#111; color:#eee; font:14px/1.4 system-ui, sans-serif; }
    canvas { display:block; width:100%; height:100%; }

    /* 상단 힌트 바 */
    #topbar {
      position: fixed; left: 12px; top: 12px; z-index: 10;
      background: rgba(0,0,0,.55); padding: 8px 10px; border-radius: 8px; backdrop-filter: blur(4px);
      display: flex; gap: 10px; align-items: center;
    }
    #topbar .hint { opacity:.85; }

    /* 하단 갤러리 바 */
    #gallery {
      position: fixed; left: 0; right: 240px; bottom: 0; z-index: 10; /* 우측 패널 폭만큼 비워줌 */
      display: flex; gap: 10px; overflow-x: auto; padding: 10px;
      background: linear-gradient(180deg, transparent, rgba(0,0,0,.6));
    }
    .card {
      min-width: 90px; max-width: 110px; flex: 0 0 auto;
      background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.08);
      border-radius: 10px; padding: 8px; cursor: pointer; user-select: none;
      display: grid; gap: 6px; place-items: center;
    }
    .card img { width: 80px; height: 80px; object-fit: cover; border-radius: 6px; background:#222; }
    .card .label { font-size: 12px; color:#ddd; text-align:center }
    .card.active { outline: 2px solid #7fd; }

    /* 우측 배치 리스트 패널 */
    #sidebar {
      position: fixed; top: 0; right: 0; bottom: 0; width: 240px; z-index: 11;
      background: rgba(0,0,0,.7); border-left: 1px solid rgba(255,255,255,.1);
      display: flex; flex-direction: column;
    }
    #sidebar header {
      padding: 12px; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,.1);
      background: rgba(255,255,255,.05);
    }
    #placed-list {
      overflow-y: auto; padding: 8px;
      display: grid; gap: 8px;
    }
    .placed-item {
      display: flex; gap: 8px; align-items: center;
      padding: 8px; border-radius: 8px;
      background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.08);
      cursor: pointer; user-select: none;
    }
    .placed-item.active { outline: 2px solid #7fd; }
    .placed-item .dot {
      width: 8px; height: 8px; border-radius: 50%; background:#7fd;
    }
    .placed-item .name {
      white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 160px;
    }
    .pad-bottom { height: 56px; } /* 하단 갤러리와 겹치지 않게 패딩 */
  </style>
</head>
<body>
  <div id="topbar">
    <span class="hint">
      마우스: 회전 · 휠: 줌 · <b>왼클릭+드래그: 가구 이동(XZ)</b> ·
      <b>A</b>: 축 토글 · <b>G</b>: 그리드 토글
    </span>
  </div>

  <div id="gallery" aria-label="가구 선택 갤러리"></div>

  <aside id="sidebar">
    <header>배치된 가구</header>
    <div id="placed-list"></div>
    <div class="pad-bottom"></div>
  </aside>

  <canvas id="c"></canvas>

  <!-- Vite 엔트리 -->
  <script type="module" src="/src/main.ts"></script>
</body>
</html>
